:root{
  --border:#e6e6e6; --text:#111; --muted:#666; --bg:#fff; --topbar:56px; --sidebar:300px;
}
/* 顶栏 */
.topbar{
  position:sticky;top:0;z-index:1000;display:flex;align-items:center;gap:12px;
  height:var(--topbar);background:var(--bg);border-bottom:1px solid var(--border);padding:0 12px;
}
.brand{font-weight:700;color:var(--text)}
.spacer{flex:1}
.user-info{display:flex;align-items:center;gap:8px;}
.logout-btn{height:30px;padding:0 12px;border:1px solid var(--border);border-radius:6px;background:#fff;color:var(--text);cursor:pointer;font-size:12px;}
.logout-btn:hover{background:#f8f8f8;}
.api-badge{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:#666;padding:2px 8px;border:1px solid var(--border);border-radius:999px}
.api-dot{width:8px;height:8px;border-radius:50%;}
.api-dot.ok{background:#22c55e}
.api-dot.err{background:#ef4444}
.api-dot.wait{background:#f59e0b}

/* 主容器与卡片 */
/* 使用自定义 --vh，避免 iOS 100vh 被地址栏压缩；并允许内容溢出时自然增高 */
.app{min-height:calc(var(--vh, 1vh)*100 - var(--topbar));height:auto;display:flex}
.card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:24px}

/* 侧边栏样式 */
.wrap{display:flex;width:100%;height:100%;}
aside{
  width:var(--sidebar);background:var(--bg);border-right:1px solid var(--border);
  display:flex;flex-direction:column;overflow-y:auto;padding:20px 0;
}
.sidebar-section{padding:0 20px 24px 20px;}
.sidebar-section h3{margin:0 0 16px 0;font-size:16px;font-weight:600;color:var(--text);}

/* 统计网格 */
.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.stat-item{text-align:center;padding:12px;background:#f8f9fa;border-radius:8px;}
.stat-number{font-size:18px;font-weight:700;color:var(--text);margin-bottom:4px;}
.stat-label{font-size:12px;color:var(--muted);}

/* 导航 */
nav{padding:0;}
nav a{
  display:flex;align-items:center;gap:12px;padding:12px 20px;color:var(--text);
  text-decoration:none;border-bottom:1px solid var(--border);transition:all 0.2s;
}
nav a:hover{background:#f8f9fa;}
nav a.active{background:#333;color:#fff;}

/* 主内容区 */
main{flex:1;overflow-y:auto;padding:20px;}

/* 表单/按钮 */
.btn{
  height:40px;padding:0 16px;border-radius:8px;border:1px solid var(--border);
  background:#fff;cursor:pointer;font-size:14px;font-weight:500;transition:all 0.2s;
  display:inline-flex;align-items:center;justify-content:center;text-decoration:none;
}
.btn:active{transform:translateY(1px)}
.btn:hover{background:#f8f8f8}
.btn-solid{border-color:#333;background:#333;color:#fff}
.btn-solid:hover{background:#555;border-color:#555}
.btn-outline{border-color:#333;background:#fff;color:#333}
.btn-outline:hover{background:#f5f5f5}
.btn-primary{border-color:#e6b56c;background:#fab041;color:#fff}
.btn-primary:hover{background:#fab041;border-color:#fab041}

/* 日历样式 */
.calendar-head{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-bottom:20px}
.calendar-title{font-weight:700;font-size:20px;color:var(--text)}
.calendar-ctrl{margin-left:auto;display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
.seg{display:flex;border:1px solid var(--border);border-radius:8px;overflow:hidden}
.seg-btn{
  border:0;background:#fff;padding:8px 16px;cursor:pointer;border-right:1px solid var(--border);
  font-size:14px;color:var(--text);transition:all 0.2s;
}
.seg-btn:last-child{border-right:0}
.seg-btn:hover{background:#f8f8f8}
.seg-btn.active{background:#333;color:#fff}

#mainCalendar{margin-top:20px;}

/* FullCalendar 自定义 */
.fc{font-size:14px;}
.fc-toolbar{margin-bottom:16px;}
.fc-button{
  background:#fff;border:1px solid var(--border);color:var(--text);
  border-radius:6px;padding:6px 12px;transition:all 0.2s;
}
.fc-button:hover{background:#f8f8f8;}
.fc-button-active{background:#333 !important;color:#fff !important;}

/* 页面内容 */
.page-content{display:none;}
.page-content.active{display:block;}

/* 登录样式（沿用你原来的简洁布局） */
.login-container{display:flex;align-items:center;justify-content:center;height:100vh;background:#fafafa;}
.login-box{width:320px;background:#fff;border:1px solid var(--border);border-radius:12px;padding:24px;box-shadow:0 4px 16px rgba(0,0,0,0.04);}
.login-box h1{font-size:20px;margin:0 0 12px 0}
.login-box input, .login-box select{width:100%;height:40px;border:1px solid var(--border);border-radius:8px;padding:0 12px;margin-top:8px;}
.login-box button{width:100%;height:40px;margin-top:12px;}
.link-text{margin-top:8px;color:#555;cursor:pointer;font-size:12px;text-align:center;}
.error-message{margin-top:8px;color:#c00;font-size:12px;}
.api-inline{margin-top:8px;font-size:12px;color:#666}

/* 表单样式（分析页等） */
.filter-item{margin-bottom:16px;}
.filter-item label{display:block;margin-bottom:6px;color:var(--muted);font-weight:500;font-size:14px;}
.filter-item input, .filter-item select{
  width:100%;height:40px;border:1px solid var(--border);border-radius:8px;padding:0 12px;
  background:#fff;color:var(--text);font-size:14px;
}
.filter-item input:focus, .filter-item select:focus{outline:none;border-color:#999;}

/* 数据分析页面样式 */
.filter-panel{margin-bottom:24px;}
.filter-section{margin-bottom:20px;padding:16px;background:#f8f9fa;border-radius:8px;}
.filter-section h3{margin:0 0 12px 0;font-size:16px;font-weight:600;color:var(--text);}
.filter-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.student-list{max-height:150px;overflow-y:auto;border:1px solid var(--border);border-radius:4px;padding:8px;}
.action-buttons{display:flex;gap:12px;margin-top:16px;}
.results-panel{margin-top:24px;padding:16px;border:1px solid var(--border);border-radius:8px;}
.results-header{font-size:16px;font-weight:600;margin-bottom:12px;color:var(--text);}
.data-table{width:100%;border-collapse:collapse;margin-top:12px;}
.data-table th, .data-table td{padding:8px;text-align:left;border-bottom:1px solid var(--border);font-size:14px;}
.data-table th{background:#f8f9fa;font-weight:600;}
.loading{display:flex;align-items:center;gap:8px;color:var(--muted);}
.spinner{width:16px;height:16px;border:2px solid var(--border);border-top:2px solid var(--text);border-radius:50%;animation:spin 1s linear infinite;}
@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}

/* 响应式 */
@media (max-width: 768px) {
  .wrap{flex-direction:column;}
  aside{width:100%;height:auto;border-right:none;border-bottom:1px solid var(--border);}
  main{padding:12px;}
  .calendar-ctrl{margin-left:0;width:100%;justify-content:space-between;}
  .seg{flex:1;}
  .seg-btn{flex:1;font-size:12px;padding:6px 8px;}
}
/* 让整个页面而不是内部容器滚动，修复“不能下拉”的问题 */
html, body{height:auto;min-height:100%;overflow-y:auto}

/* 手机端：隐藏“今日概览”，并让内部容器不再强制内部滚动 */
@media (max-width: 768px){
  .sidebar-section.overview{display:none;}  /* 今日概览隐藏 */
  .wrap{height:auto;}                       /* 外层容器不锁高 */
  main{overflow:visible;}                   /* 让 body 承担滚动 */
}
/* 横向拉手条样式 */
.pull-down{
  display:flex; align-items:center; justify-content:center;
  gap:10px; height:32px; margin:8px 0 10px 0;
  border:1px solid var(--border); border-radius:10px;
  background:#f8f9fa; user-select:none; -webkit-user-select:none;
  touch-action:none;      /* 允许我们接管拖拽手势 */
}
.pull-down .grip{
  width:40px; height:4px; border-radius:99px; background:#d1d5db;
}
.pull-down .pull-text{ font-size:12px; color:#666; }
.pull-down:active{ background:#eef0f2; }

/* 手机端更贴近屏幕边，字号再小一点 */
@media (max-width:768px){
  .pull-down{ height:30px; margin:6px 0 8px 0; }
  .pull-down .pull-text{ font-size:11px; }
}
@media (min-width:769px){ .pull-down{ display:none; } }

/* ===== 手机端顶栏简化版 ===== */
@media (max-width: 768px){
  .topbar{
    flex-direction: column;
    align-items: flex-start;
    height: auto;
    padding: 8px 12px;
    gap: 4px;
  }
  .topbar .brand{
    font-size: 18px;
    font-weight: 700;
  }
  .topbar .user-line{
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    font-size: 13px;
    color: var(--muted);
  }
  .status-dot{
    display:inline-block;
    width:8px; height:8px;
    border-radius:50%;
    margin-right:6px;
    background:#4caf50; /* 绿色 */
  }
  .logout-btn{
    font-size: 12px;
    height: 26px;
    padding: 0 8px;
    margin-left: 8px;
  }
}


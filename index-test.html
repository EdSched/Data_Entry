<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>师生管理平台</title>
  <!-- FullCalendar -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/6.1.8/index.global.min.js"></script>
  <style>
:root{
  --border:#e6e6e6;
  --text:#111;
  --muted:#666;
  --bg:#fff;
  --topbar:56px;
  --sidebar:300px;
}

/* 顶栏 */
.topbar{
  position:sticky;top:0;z-index:1000;display:flex;align-items:center;gap:12px;
  height:var(--topbar);background:var(--bg);border-bottom:1px solid var(--border);padding:0 12px;
}
.brand{font-weight:700;color:var(--text)}
.spacer{flex:1}
.user-badge{display:flex;align-items:center;gap:8px}
.user-badge .btn{height:30px}

/* 主容器与卡片 */
.app{height:calc(100vh - var(--topbar));display:flex}
.card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:24px}

/* 侧边栏样式 */
.wrap{display:flex;width:100%;height:100%;}
aside{
  width:var(--sidebar);background:var(--bg);border-right:1px solid var(--border);
  display:flex;flex-direction:column;overflow-y:auto;padding:20px 0;
}
.sidebar-section{padding:0 20px 24px 20px;}
.sidebar-section h3{margin:0 0 16px 0;font-size:16px;font-weight:600;color:var(--text);}

/* 统计网格 */
.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.stat-item{text-align:center;padding:12px;background:#f8f9fa;border-radius:8px;}
.stat-number{font-size:18px;font-weight:700;color:var(--text);margin-bottom:4px;}
.stat-label{font-size:12px;color:var(--muted);}

/* 导航 */
nav{padding:0;}
nav a{
  display:flex;align-items:center;gap:12px;padding:12px 20px;color:var(--text);
  text-decoration:none;border-bottom:1px solid var(--border);transition:all 0.2s;
}
nav a:hover{background:#f8f9fa;}
nav a.active{background:#333;color:#fff;}

/* 主内容区 */
main{flex:1;overflow-y:auto;padding:20px;}

/* 表单/按钮 */
.btn{
  height:40px;padding:0 16px;border-radius:8px;border:1px solid var(--border);
  background:#fff;cursor:pointer;font-size:14px;font-weight:500;transition:all 0.2s;
  display:inline-flex;align-items:center;justify-content:center;text-decoration:none;
}
.btn:active{transform:translateY(1px)}
.btn:hover{background:#f8f8f8}
.btn-solid{border-color:#333;background:#333;color:#fff}
.btn-solid:hover{background:#555;border-color:#555}
.btn-outline{border-color:#333;background:#fff;color:#333}
.btn-outline:hover{background:#f5f5f5}
.btn-primary{border-color:#e6b56c;background:#fab041;color:#fff}
.btn-primary:hover{background:#fab041;border-color:#fab041}

/* 日历样式 */
.calendar-head{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-bottom:20px}
.calendar-title{font-weight:700;font-size:20px;color:var(--text)}
.calendar-ctrl{margin-left:auto;display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
.seg{display:flex;border:1px solid var(--border);border-radius:8px;overflow:hidden}
.seg-btn{
  border:0;background:#fff;padding:8px 16px;cursor:pointer;border-right:1px solid var(--border);
  font-size:14px;color:var(--text);transition:all 0.2s;
}
.seg-btn:last-child{border-right:0}
.seg-btn:hover{background:#f8f8f8}
.seg-btn.active{background:#333;color:#fff}

#mainCalendar{margin-top:20px;}

/* FullCalendar 自定义 */
.fc{font-size:14px;}
.fc-toolbar{margin-bottom:16px;}
.fc-button{
  background:#fff;border:1px solid var(--border);color:var(--text);
  border-radius:6px;padding:6px 12px;transition:all 0.2s;
}
.fc-button:hover{background:#f8f8f8;}
.fc-button-active{background:#333 !important;color:#fff !important;}

/* 页面内容 */
.page-content{display:none;}
.page-content.active{display:block;}

/* 用户信息样式 */
.user-info{display:flex;align-items:center;gap:8px;}
.logout-btn{height:30px;padding:0 12px;border:1px solid var(--border);border-radius:6px;background:#fff;color:var(--text);cursor:pointer;font-size:12px;}
.logout-btn:hover{background:#f8f8f8;}

/* 表单样式 */
.filter-item{margin-bottom:16px;}
.filter-item label{display:block;margin-bottom:6px;color:var(--muted);font-weight:500;font-size:14px;}
.filter-item input, .filter-item select{
  width:100%;height:40px;border:1px solid var(--border);border-radius:8px;padding:0 12px;
  background:#fff;color:var(--text);font-size:14px;
}
.filter-item input:focus, .filter-item select:focus{outline:none;border-color:#999;}

/* 数据分析页面样式 */
.filter-panel{margin-bottom:24px;}
.filter-section{margin-bottom:20px;padding:16px;background:#f8f9fa;border-radius:8px;}
.filter-section h3{margin:0 0 12px 0;font-size:16px;font-weight:600;color:var(--text);}
.filter-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.student-list{max-height:150px;overflow-y:auto;border:1px solid var(--border);border-radius:4px;padding:8px;}
.action-buttons{display:flex;gap:12px;margin-top:16px;}
.results-panel{margin-top:24px;padding:16px;border:1px solid var(--border);border-radius:8px;}
.results-header{font-size:16px;font-weight:600;margin-bottom:12px;color:var(--text);}
.data-table{width:100%;border-collapse:collapse;margin-top:12px;}
.data-table th, .data-table td{padding:8px;text-align:left;border-bottom:1px solid var(--border);font-size:14px;}
.data-table th{background:#f8f9fa;font-weight:600;}
.loading{display:flex;align-items:center;gap:8px;color:var(--muted);}
.spinner{width:16px;height:16px;border:2px solid var(--border);border-top:2px solid var(--text);border-radius:50%;animation:spin 1s linear infinite;}
@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}

/* 响应式 */
@media (max-width: 768px) {
  .wrap{flex-direction:column;}
  aside{width:100%;height:auto;border-right:none;border-bottom:1px solid var(--border);}
  main{padding:12px;}
  .calendar-ctrl{margin-left:0;width:100%;justify-content:space-between;}
  .seg{flex:1;}
  .seg-btn{flex:1;font-size:12px;padding:6px 8px;}
}
</style>
</head>
<body>
<!-- 登录界面 -->
  <div id="loginContainer" class="login-container">
    <div class="login-box">
      <h1>大学院管理平台</h1>

      <!-- 登录表单（只保留“用户ID”） -->
      <div id="loginForm">
        <input type="text" id="loginUsername" placeholder="用户ID（由老师分配）" />
        <button type="button" id="loginBtn">登录</button>
        <div class="link-text" id="showRegisterBtn">还没有账号？登记信息</div>
        <div id="loginError" class="error-message"></div>
      </div>

      <!-- 注册表单（姓名+邮箱+所属/专业/身份） -->
      <div id="registerForm" style="display: none;">
        <input type="text" id="registerName" placeholder="姓名" />
        <input type="email" id="registerEmail" placeholder="邮箱（用于区分同名，不对外公开）" />
        <select id="registerDepartment">
          <option value="">选择所属部门</option>
          <option value="文科大学院">文科大学院</option>
          <option value="理科大学院">理科大学院</option>
          <option value="其他">其他</option>
        </select>
        <input type="text" id="registerMajor" placeholder="专业" />
        <select id="registerRole">
          <option value="">选择身份</option>
          <option value="学生">学生</option>
          <option value="老师">老师</option>
        </select>
        <button type="button" id="registerBtn">登记</button>
        <div class="link-text" id="showLoginBtn">已有账号？返回登录</div>
        <div id="registerError" class="error-message"></div>
      </div>
    </div>
  </div>

  <header class="topbar">
    <div class="brand">大学院管理平台</div>
    <div class="spacer"></div>
    <div class="user-info">
      <div class="user-info">
        <span id="userGreeting">欢迎，</span>
        <span id="userRole"></span>
      <button class="logout-btn" id="logoutBtn">退出</button>
    </div>
  </header>

  <div class="app">
    <div class="wrap">
      <aside>
        <div class="sidebar-section">
          <h3>今日概览</h3>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-number">3</div>
              <div class="stat-label">课程</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">2</div>
              <div class="stat-label">面谈</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">1</div>
              <div class="stat-label">作业</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">1</div>
              <div class="stat-label">出愿</div>
            </div>
          </div>
        </div>
        
        <nav>
          <a href="#" class="nav-link active" data-page="calendar">
            <span>我的日历</span>
          </a>
          <a href="#" class="nav-link" data-page="arrange">
            <span>课程安排</span>
          </a>
          <a href="#" class="nav-link" data-page="schedule">
            <span>我的任务</span>
          </a>
          <a href="#" class="nav-link" data-page="analysis">
            <span>数据分析</span>
          </a>
          <a href="#" class="nav-link" data-page="profile">
            <span>个人信息</span>
          </a>
        </nav>
      </aside>

      <main>
        <!-- 日历页面 -->
        <div id="calendarPage" class="page-content active">
          <section class="card">
            <div class="calendar-head">
              <div class="calendar-title" id="calendarTitle">我的日历</div>
              <div class="calendar-ctrl">
                <button id="prevBtn" class="btn btn-outline">‹</button>
                <button id="todayBtn" class="btn btn-outline">今天</button>
                <button id="nextBtn" class="btn btn-outline">›</button>
                <div class="seg">
                  <button id="dayBtn" class="seg-btn">日</button>
                  <button id="weekBtn" class="seg-btn active">周</button>
                  <button id="monthBtn" class="seg-btn">月</button>
                </div>
                <button class="btn btn-outline">刷新</button>
              </div>
            </div>
            <div id="mainCalendar"></div>
          </section>
        </div>

        <!-- 课程安排页面 -->
        <div id="arrangePage" class="page-content">
          <section class="card">
            <h2 style="margin:0 0 24px 0;font-size:24px;font-weight:600;">课程安排</h2>
            
            <div class="filter-item">
              <label>课程属性</label>
              <select id="pubAttr">
                <option value="大课">大课（只读）</option>
                <option value="VIP">VIP（可约）</option>
                <option value="面谈">面谈（可约）</option>
              </select>
            </div>
            <div class="filter-item">
              <label>课程名（大课必填）</label>
              <input type="text" id="pubCourseName" />
            </div>
            <div class="filter-item">
              <label>模式</label>
              <select id="pubMode">
                <option value="single">单次</option>
                <option value="range">区间+周几</option>
              </select>
            </div>
            <div class="filter-item" id="singleDateRow">
              <label>日期</label>
              <input type="date" id="pubDate" />
            </div>
            <div class="filter-item" id="rangeRows" style="display:none;">
              <label>起止日期</label>
              <div style="display:flex;gap:6px;">
                <input type="date" id="pubStartDate" />
                <input type="date" id="pubEndDate" />
              </div>
              <label style="margin-top:6px;">周几（可多选）</label>
              <div>
                <label><input type="checkbox" class="wd" value="1">周一</label>
                <label><input type="checkbox" class="wd" value="2">周二</label>
                <label><input type="checkbox" class="wd" value="3">周三</label>
                <label><input type="checkbox" class="wd" value="4">周四</label>
                <label><input type="checkbox" class="wd" value="5">周五</label>
                <label><input type="checkbox" class="wd" value="6">周六</label>
                <label><input type="checkbox" class="wd" value="0">周日</label>
              </div>
              <label style="margin-top:6px;">回数（可选）</label>
              <input type="number" id="pubCount" min="1" placeholder="不填则按区间+周几全部展开" />
            </div>
            <div class="filter-item">
              <label>时间（开始-结束）</label>
              <div style="display:flex;gap:6px;">
                <input type="time" id="pubStartTime" value="09:00" />
                <input type="time" id="pubEndTime" value="10:00" />
              </div>
              <div style="font-size:11px;color:#666;">仅允许整点或半点（:00 / :30）</div>
            </div>
            <div class="filter-item">
              <label>面向专业（逗号分隔；空=全专业）</label>
              <input type="text" id="pubMajors" placeholder="例：文科研究科,工学研究科" />
            </div>
            <div class="filter-item">
              <label>可见学生IDs（逗号分隔；VIP/面谈用）</label>
              <input type="text" id="pubVisibleIds" placeholder="例：S001,S015" />
            </div>
            <button class="btn btn-primary" id="pubSubmitBtn">发布</button>
          </section>
        </div>

        <!-- 我的任务页面 -->
        <div id="schedulePage" class="page-content">
          <section class="card">
            <h2 style="margin:0 0 24px 0;font-size:24px;font-weight:600;">我的任务</h2>
            <div style="display:grid;gap:12px;">
              <div style="display:flex;align-items:center;gap:12px;padding:12px;border:1px solid var(--border);border-radius:8px;">
                <input type="checkbox" checked>
                <span>批改期中考试试卷</span>
                <span style="margin-left:auto;color:var(--muted);font-size:12px;">今天截止</span>
              </div>
              <div style="display:flex;align-items:center;gap:12px;padding:12px;border:1px solid var(--border);border-radius:8px;">
                <input type="checkbox">
                <span>准备下周课程材料</span>
                <span style="margin-left:auto;color:var(--muted);font-size:12px;">明天截止</span>
              </div>
              <div style="display:flex;align-items:center;gap:12px;padding:12px;border:1px solid var(--border);border-radius:8px;">
                <input type="checkbox">
                <span>学生面谈记录整理</span>
                <span style="margin-left:auto;color:var(--muted);font-size:12px;">周五截止</span>
              </div>
            </div>
          </section>
        </div>

        <!-- 数据分析页面 -->
        <div id="analysisPage" class="page-content">
          <section class="card">
            <div class="filter-panel">
              <div class="filter-section">
                <h3>学生选择</h3>
                <div class="filter-grid">
                  <div class="filter-item">
                    <label for="departmentSelect">选择所属</label>
                    <select id="departmentSelect">
                      <option value="">请选择所属部门</option>
                    </select>
                  </div>
                  <div class="filter-item">
                    <label for="majorSelect">选择专业</label>
                    <select id="majorSelect">
                      <option value="">请选择专业</option>
                    </select>
                  </div>
                </div>
                <div id="studentListArea" style="display: none; margin-top: 10px;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="font-size: 12px;">已选: <span id="selectedCount">0</span></span>
                    <div>
                      <button class="btn" style="padding: 3px 6px; font-size: 10px;" id="selectAllBtn">全选</button>
                      <button class="btn" style="padding: 3px 6px; font-size: 10px;" id="clearAllBtn">清空</button>
                    </div>
                  </div>
                  <div class="student-list" id="studentList"></div>
                </div>
              </div>
              <div class="filter-section">
                <h3>时间范围</h3>
                <div class="filter-grid">
                  <div class="filter-item">
                    <label for="startMonth">开始月份</label>
                    <input type="month" id="startMonth">
                  </div>
                  <div class="filter-item">
                    <label for="endMonth">结束月份</label>
                    <input type="month" id="endMonth">
                  </div>
                </div>
              </div>
              <div class="filter-section">
                <h3>数据类型</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 5px;">
                  <label style="display: flex; align-items: center; gap: 5px;">
                    <input type="checkbox" id="attendance" checked>
                    <span style="font-size: 12px;">出勤情况</span>
                  </label>
                  <label style="display: flex; align-items: center; gap: 5px;">
                    <input type="checkbox" id="homework" checked>
                    <span style="font-size: 12px;">作业情况</span>
                  </label>
                  <label style="display: flex; align-items: center; gap: 5px;">
                    <input type="checkbox" id="consultation" checked>
                    <span style="font-size: 12px;">面谈记录</span>
                  </label>
                  <label style="display: flex; align-items: center; gap: 5px;">
                    <input type="checkbox" id="progress" checked>
                    <span style="font-size: 12px;">学习进度</span>
                  </label>
                </div>
              </div>
              <div class="action-buttons">
                <button class="btn" id="resetFiltersBtn">重置</button>
                <button class="btn btn-primary" id="generateReportBtn">生成报告</button>
                <button class="btn" style="display: none;" id="exportBtn">复制报告</button>
              </div>
            </div>
            <div class="results-panel" id="resultsPanel">
              <div class="results-header">
                <strong>分析结果</strong>
                <span id="resultCount"></span>
              </div>
              <div class="results-content">
                <div class="loading" id="loadingIndicator">
                  <div class="spinner"></div>
                  正在查询数据...
                </div>
                <div id="resultsData" style="display: none;">
                  <table class="data-table" id="dataTable">
                    <thead>
                      <tr>
                        <th>学生</th>
                        <th>数据类型</th>
                        <th>数值</th>
                        <th>备注</th>
                      </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                  </table>
                  <div class="copy-area" id="copyArea"></div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- 个人信息页面 -->
        <div id="profilePage" class="page-content">
          <section class="card">
            <h2 style="margin:0 0 24px 0;font-size:24px;font-weight:600;">个人信息</h2>
            <div style="display:grid;gap:16px;max-width:400px;">
              <div>
                <label style="display:block;margin-bottom:6px;color:var(--muted);font-weight:500;">姓名</label>
                <input style="width:100%;height:40px;border:1px solid var(--border);border-radius:8px;padding:0 12px;" value="张教授" readonly>
              </div>
              <div>
                <label style="display:block;margin-bottom:6px;color:var(--muted);font-weight:500;">工号</label>
                <input style="width:100%;height:40px;border:1px solid var(--border);border-radius:8px;padding:0 12px;" value="T001" readonly>
              </div>
              <div>
                <label style="display:block;margin-bottom:6px;color:var(--muted);font-weight:500;">邮箱</label>
                <input style="width:100%;height:40px;border:1px solid var(--border);border-radius:8px;padding:0 12px;" value="zhang@university.edu">
              </div>
              <div>
                <label style="display:block;margin-bottom:6px;color:var(--muted);font-weight:500;">所属院系</label>
                <select style="width:100%;height:40px;border:1px solid var(--border);border-radius:8px;padding:0 12px;">
                  <option>理科大学院</option>
                  <option>文科大学院</option>
                </select>
              </div>
              <button class="btn btn-solid">保存更改</button>
            </div>
          </section>
        </div>
      </main>
    </div>
  </div>
<script src="app.js" defer></script>
<script>
// 获取必要的DOM元素
const navLinks = document.querySelectorAll('.nav-link');
const pageContents = document.querySelectorAll('.page-content');
const calendarTitle = document.getElementById('calendarTitle');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const todayBtn = document.getElementById('todayBtn');
const dayBtn = document.getElementById('dayBtn');
const weekBtn = document.getElementById('weekBtn');
const monthBtn = document.getElementById('monthBtn');

let calendar = null;

// 页面切换功能
function showPage(pageId) {
  // 隐藏所有页面
  pageContents.forEach(page => {
    page.classList.remove('active');
    page.style.display = 'none';
  });
  
  // 显示指定页面
  const targetPage = document.getElementById(`${pageId}Page`);
  if (targetPage) {
    targetPage.style.display = 'block';
    targetPage.classList.add('active');
  }
  
  // 更新导航状态
  navLinks.forEach(link => link.classList.remove('active'));
  const activeLink = document.querySelector(`.nav-link[data-page="${pageId}"]`);
  if (activeLink) {
    activeLink.classList.add('active');
  }
  
  // 如果切换到日历页面，确保日历正确渲染
  if (pageId === 'calendar' && calendar) {
    setTimeout(() => calendar.updateSize(), 100);
  }
}

// 导航点击事件
navLinks.forEach(link => {
  link.addEventListener('click', (e) => {
    e.preventDefault();
    const pageId = link.dataset.page;
    if (pageId) {
      showPage(pageId);
    }
  });
});

// 初始化FullCalendar
function initCalendar() {
  const calendarEl = document.getElementById('mainCalendar');
  if (!calendarEl) return;

  const initialView = window.matchMedia('(max-width: 768px)').matches
    ? 'timeGridDay'
    : 'timeGridWeek';

  calendar = new FullCalendar.Calendar(calendarEl, {
    initialView,
    locale: 'zh-cn',
    firstDay: 1,
    height: 'auto',
    headerToolbar: false,
    allDaySlot: false,
    slotMinTime: '08:00:00',
    slotMaxTime: '22:00:00',
    slotDuration: '00:30:00',
    expandRows: true,
    events: [
      // 示例事件
      {
        title: '数据结构课程',
        start: '2025-08-25T10:00:00',
        end: '2025-08-25T11:30:00',
        backgroundColor: '#4285f4',
        textColor: '#fff'
      },
      {
        title: '学生面谈 - 李同学',
        start: '2025-08-26T14:00:00',
        end: '2025-08-26T15:00:00',
        backgroundColor: '#34a853',
        textColor: '#fff'
      },
      {
        title: '软件工程课程',
        start: '2025-08-27T14:00:00',
        end: '2025-08-27T15:30:00',
        backgroundColor: '#ea4335',
        textColor: '#fff'
      },
      {
        title: '教研会议',
        start: '2025-08-28T16:00:00',
        end: '2025-08-28T17:30:00',
        backgroundColor: '#fbbc04',
        textColor: '#000'
      }
    ],
    datesSet: updateCalendarTitle,
    eventClick: (info) => {
      const event = info.event;
      alert(`${event.title}\n时间：${event.start.toLocaleString('zh-CN')} - ${event.end.toLocaleString('zh-CN')}`);
    }
  });

  // 绑定控制按钮
  if (prevBtn) prevBtn.onclick = () => calendar.prev();
  if (nextBtn) nextBtn.onclick = () => calendar.next();
  if (todayBtn) todayBtn.onclick = () => calendar.today();

  if (dayBtn) dayBtn.onclick = () => changeView('timeGridDay', dayBtn);
  if (weekBtn) weekBtn.onclick = () => changeView('timeGridWeek', weekBtn);
  if (monthBtn) monthBtn.onclick = () => changeView('dayGridMonth', monthBtn);

  calendar.render();
  updateCalendarTitle();
}

// 切换视图
function changeView(viewName, activeBtn) {
  if (!calendar) return;
  calendar.changeView(viewName);
  
  // 更新按钮状态
  [dayBtn, weekBtn, monthBtn].forEach(btn => {
    if (btn) btn.classList.remove('active');
  });
  if (activeBtn) activeBtn.classList.add('active');
  
  updateCalendarTitle();
}

// 更新日历标题
function updateCalendarTitle() {
  if (!calendar || !calendarTitle) return;
  
  const view = calendar.view;
  const date = calendar.getDate();
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const day = String(date.getDate()).padStart(2, '0');

  if (view.type === 'timeGridDay') {
    calendarTitle.textContent = `${year}/${month}/${day}`;
  } else if (view.type === 'timeGridWeek') {
    const start = new Date(view.currentStart);
    const end = new Date(view.currentEnd);
    end.setDate(end.getDate() - 1);
    
    const startMonth = String(start.getMonth() + 1).padStart(2, '0');
    const startDay = String(start.getDate()).padStart(2, '0');
    const endMonth = String(end.getMonth() + 1).padStart(2, '0');
    const endDay = String(end.getDate()).padStart(2, '0');
    
    calendarTitle.textContent = `${year}/${startMonth}/${startDay} – ${endMonth}/${endDay}`;
  } else {
    calendarTitle.textContent = `${year}/${month}`;
  }
}

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', function() {
  // 显示日历页面
  showPage('calendar');
  
  // 初始化日历
  initCalendar();
  
  // 绑定课程安排模式切换
  const pubMode = document.getElementById('pubMode');
  const singleDateRow = document.getElementById('singleDateRow');
  const rangeRows = document.getElementById('rangeRows');
  
  if (pubMode) {
    pubMode.addEventListener('change', function() {
      if (this.value === 'single') {
        singleDateRow.style.display = 'block';
        rangeRows.style.display = 'none';
      } else {
        singleDateRow.style.display = 'none';
        rangeRows.style.display = 'block';
      }
    });
  }
  
  // 绑定发布按钮
  const pubSubmitBtn = document.getElementById('pubSubmitBtn');
  if (pubSubmitBtn) {
    pubSubmitBtn.addEventListener('click', function() {
      alert('课程发布功能演示：课程已成功发布！');
    });
  }
  
  // 绑定数据分析功能
  const generateReportBtn = document.getElementById('generateReportBtn');
  const resultsPanel = document.getElementById('resultsPanel');
  const loadingIndicator = document.getElementById('loadingIndicator');
  const resultsData = document.getElementById('resultsData');
  const tableBody = document.getElementById('tableBody');
  
  if (generateReportBtn) {
    generateReportBtn.addEventListener('click', function() {
      resultsPanel.style.display = 'block';
      loadingIndicator.style.display = 'flex';
      resultsData.style.display = 'none';
      
      // 模拟数据加载
      setTimeout(() => {
        loadingIndicator.style.display = 'none';
        resultsData.style.display = 'block';
        
        // 添加示例数据
        if (tableBody) {
          tableBody.innerHTML = `
            <tr>
              <td>张三</td>
              <td>出勤情况</td>
              <td>85%</td>
              <td>表现良好</td>
            </tr>
            <tr>
              <td>李四</td>
              <td>作业情况</td>
              <td>90%</td>
              <td>按时提交</td>
            </tr>
            <tr>
              <td>王五</td>
              <td>面谈记录</td>
              <td>3次</td>
              <td>积极沟通</td>
            </tr>
          `;
        }
      }, 1500);
    });
  }
  
  // 重置按钮
  const resetFiltersBtn = document.getElementById('resetFiltersBtn');
  if (resetFiltersBtn) {
    resetFiltersBtn.addEventListener('click', function() {
      // 重置所有筛选条件
      document.getElementById('departmentSelect').value = '';
      document.getElementById('majorSelect').value = '';
      document.getElementById('startMonth').value = '';
      document.getElementById('endMonth').value = '';
      document.getElementById('attendance').checked = true;
      document.getElementById('homework').checked = true;
      document.getElementById('consultation').checked = true;
      document.getElementById('progress').checked = true;
      if (resultsPanel) resultsPanel.style.display = 'none';
    });
  }
});
</script>
</body>
</html>
